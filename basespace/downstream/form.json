{
    "$type": "Form",
    "fields": [
        {
            "$type": "TextBox",
            "size": 500,
            "minLength": 0,
            "maxLength": 150,
            "value": "QIIME Downstream [LocalDateTime]",
            "label": "Analysis Name",
            "required": true,
            "requiredMessage": "Please enter name for your app session.",
            "id": "app-session-name",
            "helpText": "The analysis name you want to use in BaseSpace"
        },
        {
            "$type": "TextBox",
            "size": 500,
            "minLength": 30,
            "maxLength": 150,
            "value": "",
            "label": "Spreadsheet Key (mapping file)",
            "required": true,
            "requiredMessage": "Please enter the key of your mapping file see http://qiime.org/tutorials/remote_mapping_files.html#prerequisites for help",
            "id": "spreadsheet-key",
            "helpText": "The Google Docs spreadsheet key of your mapping file, see http://qiime.org/tutorials/remote_mapping_files.html"
        },
        {
          "$type": "Numeric",
          "id": "rarefaction-depth",
          "size": 100,
          "required": true,
          "label": "Even rarefaction depth",
          "min": 1,
          "value": 0,
          "numericType": "Integer",
          "helpText": "Number of sequences to subsample per sample"
        },
        {
            "$type": "Numeric",
            "id": "number-of-jobs",
            "size": 100,
            "required": true,
            "label": "Number of parallel jobs for diversity analyses (up to 32)",
            "min": 1,
            "max": 32,
            "value": 1,
            "numericType": "Integer",
            "helpText": "Depending on the number of samples you are processing, you may want to use more or fewer cores for OTU picking"
        },
        {
            "$type": "AppResultChooser",
            "size": 500,
            "valueType": "Input",
            "multiselect": "false",
            "label": "QIIME Upstream Results (OTU Picking output i.e. closed-ref)",
            "required": true,
            "requiredMessage": "Please choose an app result generated by 'QIIME Upstream'",
            "id": "app-result-id",
            "helpText": "Output as generated by the QIIME Upstream app - will only use the OTU table"
        },
        {
            "$type": "SectionBreak"
        },
        {
            "$type": "ProjectChooser",
            "size": 500,
            "valueType": "Output",
            "allowedPermissions": "owner",
            "label": "Save Results To",
            "required": true,
            "requiredMessage": "Please choose a project",
            "id": "project-id",
            "allowResourceCreation": true,
            "rules": "is-project-owner",
            "helpText": "The BaseSpace project where you want to store your results"
        }
    ],
    "rulesets":[
        {
            "$type": "PermissionValidationRule",
            "permissions": "Read",
            "severity": "Error",
            "message": "You do not have read access to the selected sample",
            "id": "sample-reader"
        },
        {
            "$type": "PermissionValidationRule",
            "permissions": "Own",
            "severity": "Error",
            "message": "You aren't the owner of the selected project.",
            "id": "is-project-owner"
        }
    ]
}